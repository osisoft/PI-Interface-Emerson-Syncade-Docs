<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Placeholders and advanced parsing </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Placeholders and advanced parsing ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="BIF_PlaceholdersAndAdvancedParsing">
<h1 id="placeholders-and-advanced-parsing" sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="5" sourceendlinenumber="5">Placeholders and advanced parsing</h1>

<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="7" sourceendlinenumber="7">Placeholders enable you to incorporate data from incoming events into tag names and data. Placeholders can be used in all types of templates. The precise set of placeholders supported by an interface depends on the data source. The following example illustrates how placeholders correspond to columns in a data source.</p>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="9" sourceendlinenumber="9"><img src="../../images/placeholders-and-advanced-parsing.png" alt="Placeholders and advanced parsing" sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="9" sourceendlinenumber="9"></p>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="11" sourceendlinenumber="11">When you define templates using the PI Event Frame Interface Manager, you can choose from a list of supported placeholders. To use a placeholder in a field when editing a template, click the <strong>Add Placeholder</strong> button and choose the desired placeholder.</p>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="13" sourceendlinenumber="13">You can define placeholders that read data from PI tags when triggered by batch events. To specify a tag-based placeholder, use the following syntax:</p>
<pre sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="15" sourceendlinenumber="17"><code class="lang-text">[Tag, Name=&quot;PI Tag Name&quot;, &lt;comma-delimited list of parameters&gt;]
</code></pre><p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="19" sourceendlinenumber="19">For example:</p>
<pre sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="21" sourceendlinenumber="25"><code class="lang-text">total:[Tag, name=&quot;sinusoid&quot;, range=&quot;10d&quot;, func=&quot;TOTAL&quot;]

min:[Tag, name=&quot;test_data_1&quot;, range=&quot;10d&quot;, func=&quot;MIN&quot;]
</code></pre><p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="27" sourceendlinenumber="27">The following table describes the components of a tag-based placeholder.</p>
<table sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="29" sourceendlinenumber="33">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name=&quot;tagname&quot;</td>
<td>(Required) Defines the exact name of the PI tag which should be used for data retrieval.</td>
</tr>
<tr>
<td>Range=&quot;data_range&quot;</td>
<td>(Optional) Defines the time frame for which the data is queried. It can be number of events, time frame or &quot;PIOBJECT&quot;. &quot;PIOBJECT&quot; instructs the interface to use the time frame of the related PI batch/unitbatch/subbatch object. Examples: Range=&quot;10&quot;: Retrieve the ten events that precede the triggered batch event timestamp. Range=&quot;10d&quot;: Retrieve the events for ten days from the triggered batch event timestamp. Range=&quot;PIOBJECT&quot;: Retrieve the events between the start and end times of the related batch object.</td>
</tr>
<tr>
<td>Func=&quot;option&quot;</td>
<td>(Optional) Used with Range to aggregate retrieved data. Options:<br><br>&bull; &quot;MIN&quot;: Minimum value in the time frame.<br>&bull; &quot;MAX&quot;: Maximum value in the time frame.<br>&bull; &quot;TOTAL&quot;: Sum of values in the time frame.<br>&bull; &quot;MID&quot;: Average of values in the time frame.</td>
</tr>
</tbody>
</table>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="35" sourceendlinenumber="35">Following are wildcards, which you can use to define a mask for template settings and placeholders, to match incoming data and format data to be written to the PI System. </p>
<table sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="37" sourceendlinenumber="43">
<thead>
<tr>
<th>Wildcard</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>#</td>
<td>Single digit numerical value, 0-9</td>
</tr>
<tr>
<td>@</td>
<td>Single alpha character, a-z, A-Z</td>
</tr>
<tr>
<td>?</td>
<td>Any single symbol</td>
</tr>
<tr>
<td>!</td>
<td>Repeat the previous mask symbol</td>
</tr>
<tr>
<td>*</td>
<td>Any set of symbols</td>
</tr>
</tbody>
</table>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="45" sourceendlinenumber="45">For example, to match any event that starts with &quot;Repo&quot;, use the * wildcard as follows: [EVENT, VALUE=&quot;Repo*&quot;]. </p>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="47" sourceendlinenumber="47">The interface supports a set of parameters that provide fine control over how incoming data is parsed. These advanced parsing parameters can be used in all types of templates. To enable you to incorporate these parsing parameters into a placeholder expression, the <strong>Build a Placeholder</strong> dialog provides an <strong>Add Substring Parsing</strong> option.</p>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="49" sourceendlinenumber="49">If you specify parsing parameters for one or more placeholders and no matching data is found, the entry is set to blank. The following table lists the parameters for parsing incoming data. The names of parameters, placeholders, and value substrings are not case-sensitive.</p>
<table sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="51" sourceendlinenumber="58">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>LBE=ʺsubstringʺ</td>
<td>Defines the left bound of the target substring value. The resulting substring does not include the specified substring.</td>
</tr>
<tr>
<td>LBI=ʺsubstringʺ</td>
<td>Defines the left bound of the target substring value. The resulting substring includes the specified substring.</td>
</tr>
<tr>
<td>RBE=ʺsubstringʺ</td>
<td>Defines the right bound of the target substring value. The resulting substring does not include the specified substring.</td>
</tr>
<tr>
<td>RBI=ʺsubstringʺ</td>
<td>Defines the right bound of the target substring value. The resulting substring includes the specified substring.</td>
</tr>
<tr>
<td>DELIM=ʺsubstringʺ</td>
<td>Specifies the field separator character or substring. Must be used in conjunction with the COUNT parameter. It narrows the results to the substring contained in delimiters, where the starting delimiter index is specified by the COUNT parameter. To parse the delimited substring, you can specify right and left boundary substrings.</td>
</tr>
<tr>
<td>COUNT=#</td>
<td>Index (position) of the delimiter from which to start parsing. Must be used in conjunction with the DELIM parameter.</td>
</tr>
</tbody>
</table>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="60" sourceendlinenumber="60">To search all fields of an incoming event, specify a wildcard for the placeholder name (for example [*,lbe=&quot;u:&quot;]).</p>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="62" sourceendlinenumber="62">The following table lists examples of parsing a field that contains the following data:</p>
<pre sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="64" sourceendlinenumber="66"><code class="lang-text">|U:browntod|C:SP_CHARGE_AMOUNT|O:1200|N:1123|E:kg|M:Local
</code></pre><table sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="68" sourceendlinenumber="80">
<thead>
<tr>
<th>Example</th>
<th>Resulting Data</th>
</tr>
</thead>
<tbody>
<tr>
<td>[value, lbe=ʺN:ʺ]</td>
<td>1123</td>
</tr>
<tr>
<td>[value, lbi=ʺN:ʺ]</td>
<td>N:1123</td>
</tr>
<tr>
<td>[value, rbe=ʺtodʺ]</td>
<td></td>
</tr>
<tr>
<td>[value, rbi=ʺtodʺ]</td>
<td>U:browntod</td>
</tr>
<tr>
<td>[value, lbe=ʺU:ʺ, rbe=ʺ</td>
<td>ʺ]</td>
</tr>
<tr>
<td>[value, lbi=ʺU:ʺ, rbe=ʺ</td>
<td>ʺ]</td>
</tr>
<tr>
<td>[value, lbe=ʺO:ʺ, rbi=ʺkgʺ]</td>
<td>1200</td>
</tr>
<tr>
<td>[value, delim=ʺ</td>
<td>ʺ,count=3] O:1200</td>
</tr>
<tr>
<td>[value, delim=ʺ</td>
<td>ʺ,count=3,lbe=ʺO:ʺ]</td>
</tr>
<tr>
<td>[value, delim=ʺ</td>
<td>ʺ,count=3,lbe=ʺC:SPʺ,rbe=ʺUNTʺ]</td>
</tr>
<tr>
<td>[value, delim=ʺ</td>
<td>ʺ,count=6,lbe=ʺM:ʺ]</td>
</tr>
</tbody>
</table>
<h2 id="pievent-placeholders" sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="82" sourceendlinenumber="82">PIEVENT placeholders</h2>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="84" sourceendlinenumber="84">These placeholders are supported for expression triggered by PI batch events (Parameter, value=&quot;PIEVENT&quot;]).</p>
<table sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="86" sourceendlinenumber="95">
<thead>
<tr>
<th>Place Holder</th>
<th>Batch Level</th>
<th>How Batch Database is Stored</th>
<th>How Event Frames are Stored</th>
</tr>
</thead>
<tbody>
<tr>
<td>[BATCHID]</td>
<td>1 or 2</td>
<td>String value that is stored as PIBatch BatchID and PIUnitBatch BatchID property</td>
<td>Top-level event frame: Name property Second-level event frame: BatchID attribute.</td>
</tr>
<tr>
<td>[PROCEDURE]</td>
<td>1</td>
<td>PIBatch Recipe property</td>
<td>Top level event frame Recipe Attribute</td>
</tr>
<tr>
<td>[UNITPROCEDURE]</td>
<td>2</td>
<td>PIUnitBatch Procedure property</td>
<td>Name property</td>
</tr>
<tr>
<td>[OPERATION]</td>
<td>3</td>
<td>PISubBatch Name property</td>
<td>Name property</td>
</tr>
<tr>
<td>[PHASE]</td>
<td>4</td>
<td>PISubBatch Name property</td>
<td>Name property</td>
</tr>
<tr>
<td>[PHASESTATE]</td>
<td>5</td>
<td>PISubBatch Name property</td>
<td>Name property</td>
</tr>
<tr>
<td>[PHASESTEP]</td>
<td>6</td>
<td>PISubBatch Name property</td>
<td>Name property</td>
</tr>
<tr>
<td>[UNIT]</td>
<td>n/a</td>
<td>PIModule Name property</td>
<td>PI AF element Name property.</td>
</tr>
</tbody>
</table>
<p sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="97" sourceendlinenumber="97">For example, to update a PI tag when a PI batch is started or ended, specify the following tag templates:</p>
<pre sourcefile="content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md" sourcestartlinenumber="99" sourceendlinenumber="107"><code class="lang-text">Tag[1].Name=BESName:PIEvent.Batch.Active 
Tag[1].Value=BATCH START: [BATCHID] |Prod: [PRODUCT] |Rec: [PROCEDURE] 
Tag[1].Trigger=[EVENT,value=&quot;PIEVENT&quot;] [DESCRIPT, value=&quot;BATCH&quot;] [PVAL,value=&quot;START&quot;]

Tag[2].Name=BESName:PIEvent.Batch.Active 
Tag[2].Value=BATCH END: [BATCHID] |Prod: [PRODUCT] |Rec: [PROCEDURE] 
Tag[2].Trigger=[EVENT,value=&quot;PIEVENT&quot;] [DESCRIPT, value=&quot;BATCH&quot;] [PVAL,value=&quot;END&quot;]
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/PI-Interface-Emerson-Syncade-Docs/blob/main/content/batch-interface-framework/how-batch-interfaces-work/templates-for-mapping-data-source-events/placeholders-and-advanced-parsing.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
