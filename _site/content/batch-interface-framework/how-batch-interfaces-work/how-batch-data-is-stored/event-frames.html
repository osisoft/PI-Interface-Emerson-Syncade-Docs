<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Event frames </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Event frames ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="BIF_EventFrames">
<h1 id="event-frames">Event frames</h1>

<!-- Static topic. No modifications usually required -->
<p>Use event frames to record batch data. Event frames allow you to use recipe templates to define the attributes to be stored in event frames at every level of the hierarchy.</p>
<p>Each event frame contains the following fields:</p>
<ul>
<li>Name</li>
<li>Description</li>
<li>Start time</li>
<li>End time</li>
<li>Template</li>
<li>Category (Default is &quot;OSIBatch&quot;)</li>
<li>Batch properties (stored in event frame attributes)</li>
<li>Referenced elements such as unit or phase module</li>
</ul>
<p>To view batch event frames and AF elements generated by the interface, use PI System Explorer. In the root-level event frame, the Name field contains the batch ID from the data source. In lower-level event frames, the Name field contains the recipe name. In event frames for a procedure-level recipe, the product and recipe properties from the data source are stored as attributes. For unit procedure-level recipes, the batch ID and product from the data source are stored as attributes.</p>
<p>If the highest recipe level is an operation or phase (that is, neither procedure nor unit procedure levels are defined), the interface creates event frames that correspond to the procedure and unit procedure level.</p>
<p>The following sections explain how data is stored in event frames for each level of the batch hierarchy.</p>
<h2 id="procedure">Procedure</h2>
<p>For each batch in the data source, the interface creates a root-level event frame that represents the procedure in the recipe. Each root-level event frame contains a collection of child event frames that correspond to unit procedures. Data from source batch events (that is, properties) can be recorded in the attributes of the event frame and in PI points. Source batches can have identical IDs and recipe names in the same time frame.</p>
<p>To match the source batch with an event frame, the interface stores additional information in the extended properties of the root event frame. The Name property contains the ID of the source batch, and the Value property contains an XML structure composed of the following batch data:</p>
<ul>
<li>Batch ID</li>
<li>Product (searchable)</li>
<li>Formula name</li>
<li>Recipe (searchable)</li>
<li>Recipe type</li>
<li>Start time UTC</li>
<li>End time UTC</li>
<li>Interface name</li>
<li>Interface ID</li>
<li>Data source</li>
</ul>
<p>The following table shows how the source batch properties map to event frame data.</p>
<table>
<thead>
<tr>
<th>Source Procedure Property</th>
<th>Event Frame Field</th>
<th>Event Frame Attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>BatchID</td>
<td>Name</td>
<td></td>
</tr>
<tr>
<td>Procedure Name</td>
<td></td>
<td>Recipe</td>
</tr>
<tr>
<td>Product</td>
<td></td>
<td>Product</td>
</tr>
<tr>
<td>Start Time</td>
<td>Start Time</td>
<td></td>
</tr>
<tr>
<td>End Time</td>
<td>End Time</td>
<td></td>
</tr>
</tbody>
</table>
<p>By default, the interface captures the following batch-associated properties and stores them in procedure-level event frame attributes:</p>
<ul>
<li>Recipe header</li>
<li>Formula header</li>
<li>Recipe value</li>
<li>Report</li>
</ul>
<p>For the preceding attributes, the name is assigned from the source [DESCRIPTION] column, the value from the source [PVALUE] columns, and the unit of measure attribute from the [EU] column. </p>
<p>The procedure-level event frame can represent merged source batches. The product and recipe attributes contain data associated with the source batch that started the merged event frame. For each merged source batch, the interface creates an entry node in the event frame&#39;s extended properties, named using the unique ID of the source batch, with its value containing an XML structure composed of the original source batch properties. </p>
<h2 id="unit-procedure">Unit Procedure</h2>
<p>The interface creates a unit procedure-level event frame for each unit procedure read from the data source. Each unit procedure-level event frame is a child of the procedure-level event frame and contains the subset of event frames that represent the source batch operation-level recipe. The start and end times of an event frame record the start and end of physical processing in a unit. </p>
<p>The name field of the unit procedure-level event frames contains the unit procedure name as read from the data source. The batch ID and product properties are searchable attributes of the event frame. The following table shows how, by default, the source batch properties map to event frame data:</p>
<table>
<thead>
<tr>
<th>Source UnitProcedure Property</th>
<th>Event Frame Field</th>
<th>Event Frame Attribute</th>
<th>Reference Element</th>
</tr>
</thead>
<tbody>
<tr>
<td>BatchID</td>
<td></td>
<td>BatchID</td>
<td></td>
</tr>
<tr>
<td>UnitProcedure Name</td>
<td>Name</td>
<td>Procedure</td>
<td></td>
</tr>
<tr>
<td>Product</td>
<td></td>
<td>Product</td>
<td></td>
</tr>
<tr>
<td>Start Time</td>
<td>Start Time</td>
<td></td>
<td></td>
</tr>
<tr>
<td>End Time</td>
<td>End Time</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Unit</td>
<td></td>
<td></td>
<td>Unit</td>
</tr>
</tbody>
</table>
<p>In addition to batch ID, procedure and product attributes, the interface records recipe and report events in event frame attributes. For these events, the attribute name is assigned from the [DESCRIPTION] column, the value from the source [PVALUE] column, and units of measure from the [EU] column. </p>
<p>Unit procedure-level event frame properties do not change if the parent object is a merged event frame. By default, unit procedure event frames contain the batch ID and procedure name read from the data source. (To override the default, use PI Event Frame Interface Manager to configure the Batch ID mask field on the Batch Settings page.) </p>
<p>When operation or phase-level recipes are run, the interface uses the operation or phase name as the name of the unit procedure-level event frame. </p>
<h2 id="operation">Operation</h2>
<p>The interface creates an operation-level event frame for each operation read from the data source. Each operation-level event frame is a child of the unit procedure-level event frame and contains the subset of event frames that represent the source batch phase-level recipe. </p>
<p>The name field of the operation-level event frames is the operation name read from the data source. The following table shows how the source batch properties map to event frame attributes:</p>
<table>
<thead>
<tr>
<th>Source Operation Property</th>
<th>Event Frame Field</th>
<th>Reference Element</th>
</tr>
</thead>
<tbody>
<tr>
<td>Operation Name</td>
<td>Name</td>
<td></td>
</tr>
<tr>
<td>Start Time</td>
<td>Start Time</td>
<td></td>
</tr>
<tr>
<td>End Time</td>
<td>End Time</td>
<td></td>
</tr>
<tr>
<td>Unit</td>
<td></td>
<td>Unit</td>
</tr>
</tbody>
</table>
<p>By default, the interface records recipe value and report events in event frame attributes. For these events, the attribute name is assigned from the [DESCRIPTION] column, the value from the source [PVALUE] column, and units of measure from the [EU] column. </p>
<h2 id="phase">Phase</h2>
<p>The interface creates a phase-level event frame for each phase read from the data source. Each phase-level event frame is created as a child of an operation-level event frame and contains the subset of event frames that represent the source batch phase states-level recipe. </p>
<p>The name field of the phase-level event frame contains the phase name read from the data source. The following table shows how the source batch properties map to event frame attributes:</p>
<table>
<thead>
<tr>
<th>Source Phase Property</th>
<th>Event Frame Field</th>
<th>Reference Elements</th>
</tr>
</thead>
<tbody>
<tr>
<td>Phase Name</td>
<td>Name</td>
<td></td>
</tr>
<tr>
<td>Start Time</td>
<td>Start Time</td>
<td></td>
</tr>
<tr>
<td>End Time</td>
<td>End Time</td>
<td></td>
</tr>
<tr>
<td>Unit</td>
<td></td>
<td>Unit</td>
</tr>
<tr>
<td>Phase Module</td>
<td></td>
<td>Phase Module</td>
</tr>
</tbody>
</table>
<p>By default, the interface records recipe value and report events in event frame attributes. For these events, the attribute name is assigned from the [DESCRIPTION] column, the value from the source [PVALUE] column, and units of measure from the [EU] column. </p>
<h2 id="phase-state">Phase State</h2>
<p>The interface creates a phase state-level event frame for each phase state read from the data source. Each phase state-level event frame is created as a child of a phase-level event frame and, if so configured, can contain the subset of event frames that represent the phase steps. The start of new phase state ends the previous one, unless the new state is COMPLETE, ABORTED or STOPPED, which end the current phase state without beginning a new one. These phase states have a zero-duration time frame. </p>
<p>The name field of the phase state event frames reflects an actual source recipe phase state name. Below is the mapping of source phase state to event frame fields and attributes:</p>
<table>
<thead>
<tr>
<th>Source Phase State Property</th>
<th>Event Frame Field</th>
<th>Referenced Element</th>
</tr>
</thead>
<tbody>
<tr>
<td>Phase State</td>
<td>Name</td>
<td></td>
</tr>
<tr>
<td>Start Time</td>
<td>Start Time</td>
<td></td>
</tr>
<tr>
<td>End Time</td>
<td>End Time</td>
<td></td>
</tr>
<tr>
<td>Unit</td>
<td></td>
<td>Unit</td>
</tr>
<tr>
<td>Operation Module</td>
<td></td>
<td>Operation Module</td>
</tr>
<tr>
<td>Phase Module</td>
<td>Phase Module</td>
<td>Phase Step</td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/PI-Interface-Emerson-Syncade-Docs/blob/main/content/batch-interface-framework/how-batch-interfaces-work/how-batch-data-is-stored/event-frames.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
